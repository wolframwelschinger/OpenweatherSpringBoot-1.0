"use strict";

wetterApp.factory('WetterDatenService', function() {

	var srv = {};

	
    srv._wetterdaten = [
        {
        		Id					: 1,
        		ort					: 'Berlin Pankow',
        		land					: 'DE',
        		geoLaenge			: 13.4019,
        		geoBreite			: 52.5693,
        		zeitStempel			: 1505487000,
        		zeitString			: '15.09.2017 16:50',
        		temperatur			: 15.04,
        		temperatur_min		: 14,
        		temperatur_max		: 16,
        		luftFeuchtigkeit		: 82,
        		luftDruck			: 1011,
        		windGeschwindigkeit	: 5.1,
        		windRichtung			: 210,
        		wolken				: 75,
        		wetterbeschreibung	: 'Leichter Regenschauer',
        		iconUrl				: 'http://openweathermap.org/img/w/09d.png'
	    },
        {
	    		Id					: 2,
	    		ort					: 'Palma de Mallorca',
	    		land					: 'ES',
	    		geoLaenge			: 2.6475,
	    		geoBreite			: 39.5695,
	    		zeitStempel			: 1505487000,
	    		zeitString			: '15.09.2017 16:50',
	    		temperatur			: 27,
	    		temperatur_min		: 27,
	    		temperatur_max		: 27,
	    		luftFeuchtigkeit		: 69,
	    		luftDruck			: 1014,
	    		windGeschwindigkeit	: 2.1,
	    		windRichtung			: 220,
	    		wolken				: 20,
	    		wetterbeschreibung	: 'Ein paar Wolken',
	    		iconUrl				: 'http://openweathermap.org/img/w/02d.png'
	    }
      ];

    // Service implementation
    srv.getWetterdatenByOrt = function(ort) {
        for (var i = 0, n = srv._wetterdaten.length; i < n; i++) {
            if (ort === srv._wetterdaten[i].ort) {
                return angular.copy(srv._wetterdaten[i]);
            }
        }

        return null;
    };

    srv.getWetterdaten = function() {
        // Copy the array in order not to expose the internal data structure
        return angular.copy(srv._wetterdaten);
    };

    /*
    srv.storeBook = function(book) {
        srv._books.push(book);
    };

    srv.updateBook = function(book) {
        for (var i = 0, n = srv._books.length; i < n; i++) {
            if (book.isbn === srv._books[i].isbn) {
                angular.extend(srv._books[i], book);
                return;
            }
        }
    };

    srv.deleteBookByIsbn = function(isbn) {
        console.log('BookDataService: Buch mit der ISBN ' + isbn + ' loeschen!');
        var i = srv._books.length;
        while (i--) {
            if (isbn === srv._books[i].isbn) {
                srv._books.splice(i, 1);
                return;
            }
        }
    };
	*/
    
    // Public API
    return {
        getWettdatenByOrt: function(ort) {
            return srv.getWetterdatenByOrt(ort);
        },
        getWetterdaten: function() {
            return srv.getWetterdaten();
        } /*,
        storeBook: function(book) {
            srv.storeBook(book);
        },
        updateBook: function(book) {
            srv.updateBook(book);
        },
        deleteBookByIsbn: function(isbn) {
            srv.deleteBookByIsbn(isbn);
        } */
    };
    
});
