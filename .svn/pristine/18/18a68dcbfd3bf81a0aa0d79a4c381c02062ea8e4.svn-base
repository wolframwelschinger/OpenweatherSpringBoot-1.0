"use strict";

/* Fragt mit Hilfe des Services WetterOnlineService Wetterinformationen Ã¼ber die OpenweatherMap-REST-Schnittstelle aus dem Internet ab
 * 
 */
wetterApp.controller('WetterOnlineCtrl', function($scope, $routeParams, $resource, $cookies, $locale, WetterOnlineService) {

  var ort = $routeParams.ort;
  $scope.isAdmin = false;
 
  console.log('+++ Ort: ' + ort);
  console.log('+++ Locale: ' + $locale.id);
  
  WetterOnlineService.byOrtsbezeichnung({ort: ort}).$promise
  .then(function(data){
	  console.log('Daten wurden geladen');
	  $scope.wetter = data;
	  console.log(data);
	  console.log(data.wetterbeschreibungen);
	  console.log(data.wetterbeschreibungen.length);
//	  if (data.wetterbeschreibungen.length === 1){
	  if (data.wetterbeschreibungen.length > 0){	  
		  console.log('Wetterbeschreibung vorhanden.');
		  console.log(data.wetterbeschreibungen[0].description);
		  console.log(data.wetterbeschreibungen[0].iconUrl);
		  $scope.wetterBeschreibung = data.wetterbeschreibungen[0].description;
		  $scope.wetterIconUrl = data.wetterbeschreibungen[0].iconUrl;
	  } else {
		  console.log('Keine Wetterbeschreibung vorhanden.');
	  }
	  
  });  

});
