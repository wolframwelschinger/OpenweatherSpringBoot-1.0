"use strict";

/* Fragt ueber den Service WetterService die Wetterdaten aus der DB ab 
 * 
 */
wetterApp.controller('OrtListCtrl', function($scope, $resource, $cookies, $locale, OrtService) {

  $scope.isAdmin = false;

  console.log('+++ Locale: ' + $locale.id);

  // alle Orte in DE suchen
  var paramsDE = { 
      'filter' : { 'land' : 'DE' },
      'sort' : { 'orderBy' : 'ort', 'reverse' : false }
  }; 
  
  // alle Orte (kein Filter), sortiert nach Ort, Page 1
  var params = { 
	      'filter' : {},
	      'sort'   : { 'orderBy' : 'ort', 'reverse' : false },
	      'page'   : { 'index' : 0}
	  };  
  
  /* Laden der Ort-Entries per REST-Call aus der DB */
  OrtService['get'](params).$promise
  .then(function(data){
	  console.log('Daten wurden geladen');
	  console.log(data);
	  console.log('Anzahl der Datensaetze: ' + data.totalElements)
	  $scope.wetterdaten = data.content;
  });
  
});
